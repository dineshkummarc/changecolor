// http://stackoverflow.com/questions/1507931/generate-lighter-darker-color-in-css-using-javascript/1507987#1507987
changecolor=function(){function b(b,c,d){var e,f,g,h,i;return b?(b=b.replace(/^\s*|\s*$/,""),b=b.replace(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i,"#$1$1$2$2$3$3"),e=Math.round(c*256)*(d?-1:1),f=b.match(new RegExp("^rgba?\\(\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])\\s*,\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])\\s*,\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])(?:\\s*,\\s*(0|1|0?\\.\\d+))?\\s*\\)$","i")),!f||f[4]===null?g=null:g=f[4],f?h=[f[1],f[2],f[3]]:h=b.replace(/^#?([a-f0-9][a-f0-9])([a-f0-9][a-f0-9])([a-f0-9][a-f0-9])/i,function(){return parseInt(arguments[1],16)+","+parseInt(arguments[2],16)+","+parseInt(arguments[3],16)}).split(/,/),f?"rgb"+(g!==null?"a":"")+"("+Math[d?"max":"min"](parseInt(h[0],10)+e,d?0:255)+", "+Math[d?"max":"min"](parseInt(h[1],10)+e,d?0:255)+", "+Math[d?"max":"min"](parseInt(h[2],10)+e,d?0:255)+(g!==null?", "+g:"")+")":["#",a(Math[d?"max":"min"](parseInt(h[0],10)+e,d?0:255).toString(16),2),a(Math[d?"max":"min"](parseInt(h[1],10)+e,d?0:255).toString(16),2),a(Math[d?"max":"min"](parseInt(h[2],10)+e,d?0:255).toString(16),2)].join("")):b}var a=function(a,b){var c="0";a+="";while(a.length<b)a=c+a;return a};return{lighter:function(a,c){return b(a,c,!1)},darker:function(a,c){return b(a,c,!0)}}}();